<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Spider::Widget [Spider documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Spider::Widget
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../files/lib/spiderfw/widget/widget_rb.html">lib/spiderfw/widget/widget.rb</a>
            (<a href="http://github.com/me/spider/tree/master/lib/spiderfw/widget/widget.rb">view online</a>)
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a href="PageController.html">Spider::PageController</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M001044">attr_to_scene</a></li>
              <li><a href="#M001038">attribute</a></li>
              <li><a href="#M001039">attributes</a></li>
              <li><a href="#M001049">default_action</a></li>
              <li><a href="#M001052">default_template</a></li>
              <li><a href="#M001048">get_scene_elements</a></li>
              <li><a href="#M001042">i_attr_accessor</a></li>
              <li><a href="#M001040">i_attribute</a></li>
              <li><a href="#M001037">inherited</a></li>
              <li><a href="#M001043">is_attr_accessor</a></li>
              <li><a href="#M001041">is_attribute</a></li>
              <li><a href="#M001056">new</a></li>
              <li><a href="#M001055">pub_url</a></li>
              <li><a href="#M001046">register_tag</a></li>
              <li><a href="#M001053">relative_url</a></li>
              <li><a href="#M001054">route_url</a></li>
              <li><a href="#M001047">scene_elements</a></li>
              <li><a href="#M001045">tag</a></li>
              <li><a href="#M001051">template_path</a></li>
              <li><a href="#M001050">template_path_parent</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M001077">add_widget</a></li>
              <li><a href="#M001058">attributes=</a></li>
              <li><a href="#M001061">before</a></li>
              <li><a href="#M001062">before_done?</a></li>
              <li><a href="#M001076">create_widget</a></li>
              <li><a href="#M001084">css_class</a></li>
              <li><a href="#M001068">did_run?</a></li>
              <li><a href="#M001074">flash</a></li>
              <li><a href="#M001057">full_id</a></li>
              <li><a href="#M001069">init_widget_done?</a></li>
              <li><a href="#M001064">init_widgets</a></li>
              <li><a href="#M001082">owner_controller</a></li>
              <li><a href="#M001072">params</a></li>
              <li><a href="#M001079">parse_content</a></li>
              <li><a href="#M001078">parse_content_xml</a></li>
              <li><a href="#M001063">prepare</a></li>
              <li><a href="#M001083">prepare_scene</a></li>
              <li><a href="#M001066">prepare_widgets</a></li>
              <li><a href="#M001070">render</a></li>
              <li><a href="#M001080">resources</a></li>
              <li><a href="#M001059">route_widget</a></li>
              <li><a href="#M001067">run</a></li>
              <li><a href="#M001073">session</a></li>
              <li><a href="#M001065">set_widget_attributes</a></li>
              <li><a href="#M001075">transient_session</a></li>
              <li><a href="#M001071">try_rescue</a></li>
              <li><a href="#M001060">widget_request_path</a></li>
              <li><a href="#M001081">widget_resources</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li>HTTPMixin</li>
              </ol>
            </div>
          </div>
          <div id='section'>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>attributes</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>attributes</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>containing_template</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>id</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>id_path</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>parent</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>request</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>scene</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>scene_attributes</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>template</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>widget_attributes</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>widgets</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='public-class method' id='method-M001044'>
                <a name='M001044'>      </a>
                <div class='synopsis'>
                  <span class='name'>attr_to_scene</span>
                  <span class='arguments'>(*names)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001044-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001044-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 62</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attr_to_scene</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">names</span>)&#x000A;                <span class="ruby-ivar">@scene_attributes</span> <span class="ruby-operator">||=</span> []&#x000A;                <span class="ruby-identifier">names</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@scene_attributes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span> }&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001038'>
                <a name='M001038'>      </a>
                <div class='synopsis'>
                  <span class='name'>attribute</span>
                  <span class='arguments'>(name, params={})</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001038-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001038-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 28</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">params</span>={})&#x000A;                <span class="ruby-comment cmt"># TODO: implement, this is just a placeholder</span>&#x000A;                <span class="ruby-ivar">@attributes</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@@common_attributes</span>.<span class="ruby-identifier">clone</span>&#x000A;                <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">params</span>&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001039'>
                <a name='M001039'>      </a>
                <div class='synopsis'>
                  <span class='name'>attributes</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001039-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001039-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 34</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes</span>&#x000A;                <span class="ruby-ivar">@attributes</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@@common_attributes</span>.<span class="ruby-identifier">clone</span>&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001049'>
                <a name='M001049'>      </a>
                <div class='synopsis'>
                  <span class='name'>default_action</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001049-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001049-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 84</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_action</span>&#x000A;                <span class="ruby-value str">'run'</span>&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001052'>
                <a name='M001052'>      </a>
                <div class='synopsis'>
                  <span class='name'>default_template</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001052-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001052-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 100</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_template</span>&#x000A;                <span class="ruby-constant">Spider</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflector</span>.<span class="ruby-identifier">underscore</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">'/'</span>)[<span class="ruby-value">-1</span>]&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001048'>
                <a name='M001048'>      </a>
                <div class='synopsis'>
                  <span class='name'>get_scene_elements</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001048-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001048-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 80</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_scene_elements</span>&#x000A;                <span class="ruby-ivar">@scene_elements</span>&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001042'>
                <a name='M001042'>      </a>
                <div class='synopsis'>
                  <span class='name'>i_attr_accessor</span>
                  <span class='arguments'>(name, params={})</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001042-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001042-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 50</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">i_attr_accessor</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">params</span>={})&#x000A;                <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:instance_attr</span>] = <span class="ruby-keyword kw">true</span>&#x000A;                <span class="ruby-identifier">i_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">params</span>)&#x000A;                <span class="ruby-identifier">attr_accessor</span>(<span class="ruby-identifier">name</span>)&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001040'>
                <a name='M001040'>      </a>
                <div class='synopsis'>
                  <span class='name'>i_attribute</span>
                  <span class='arguments'>(name, params={})</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001040-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001040-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 38</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">i_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">params</span>={})&#x000A;                <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:instance_attr</span>] = <span class="ruby-keyword kw">true</span>&#x000A;                <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:set_var</span>] = <span class="ruby-keyword kw">true</span>&#x000A;                <span class="ruby-identifier">attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">params</span>)&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001037'>
                <a name='M001037'>      </a>
                <div class='synopsis'>
                  <span class='name'>inherited</span>
                  <span class='arguments'>(subclass)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001037-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001037-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 23</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inherited</span>(<span class="ruby-identifier">subclass</span>)&#x000A;                <span class="ruby-identifier">subclass</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-identifier">:@attributes</span>, <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">clone</span>)&#x000A;                <span class="ruby-identifier">subclass</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-identifier">:@scene_attributes</span>, <span class="ruby-ivar">@scene_attributes</span>.<span class="ruby-identifier">clone</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@scene_attributes</span>&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001043'>
                <a name='M001043'>      </a>
                <div class='synopsis'>
                  <span class='name'>is_attr_accessor</span>
                  <span class='arguments'>(name, params={})</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001043-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001043-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 56</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">is_attr_accessor</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">params</span>={})&#x000A;                <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:instance_attr</span>] = <span class="ruby-keyword kw">true</span>&#x000A;                <span class="ruby-identifier">is_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">params</span>)&#x000A;                <span class="ruby-identifier">attr_accessor</span>(<span class="ruby-identifier">name</span>)&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001041'>
                <a name='M001041'>      </a>
                <div class='synopsis'>
                  <span class='name'>is_attribute</span>
                  <span class='arguments'>(name, params={})</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001041-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001041-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 44</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">is_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">params</span>={})&#x000A;                <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:instance_attr</span>] = <span class="ruby-keyword kw">true</span>&#x000A;                <span class="ruby-identifier">i_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">params</span>)&#x000A;                <span class="ruby-identifier">attr_to_scene</span>(<span class="ruby-identifier">name</span>)&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001056'>
                <a name='M001056'>      </a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(request, response, scene=nil)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001056-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001056-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 124</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">request</span>, <span class="ruby-identifier">response</span>, <span class="ruby-identifier">scene</span>=<span class="ruby-keyword kw">nil</span>)&#x000A;            <span class="ruby-keyword kw">super</span>&#x000A;            <span class="ruby-ivar">@widgets</span> = {}&#x000A;            <span class="ruby-ivar">@attributes</span> = <span class="ruby-constant">WidgetAttributes</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>)&#x000A;            <span class="ruby-ivar">@id_path</span> = []&#x000A;            <span class="ruby-ivar">@widget_attributes</span> = {}&#x000A;            <span class="ruby-ivar">@resources</span> = []&#x000A;            <span class="ruby-ivar">@use_template</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">default_template</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001055'>
                <a name='M001055'>      </a>
                <div class='synopsis'>
                  <span class='name'>pub_url</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001055-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001055-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 112</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pub_url</span>&#x000A;                <span class="ruby-identifier">w</span> = <span class="ruby-keyword kw">self</span>&#x000A;                <span class="ruby-comment cmt"># FIXME! this is a quick hack to make extended templates work</span>&#x000A;                <span class="ruby-comment cmt"># but what we need is a better method to handle resource ownership</span>&#x000A;                <span class="ruby-identifier">w</span> = <span class="ruby-identifier">w</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Spider</span><span class="ruby-operator">::</span><span class="ruby-constant">Widget</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">subclass_of?</span>(<span class="ruby-constant">Spider</span><span class="ruby-operator">::</span><span class="ruby-constant">Widget</span>)&#x000A;                <span class="ruby-identifier">w</span>.<span class="ruby-identifier">route_url</span><span class="ruby-operator">+</span><span class="ruby-value str">'/pub'</span>&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001046'>
                <a name='M001046'>      </a>
                <div class='synopsis'>
                  <span class='name'>register_tag</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001046-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001046-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 71</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_tag</span>(<span class="ruby-identifier">name</span>)&#x000A;                <span class="ruby-constant">Spider</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">register</span>(<span class="ruby-identifier">name</span>, <span class="ruby-keyword kw">self</span>)&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001053'>
                <a name='M001053'>      </a>
                <div class='synopsis'>
                  <span class='name'>relative_url</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001053-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001053-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 104</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">relative_url</span>&#x000A;                <span class="ruby-identifier">template_path</span>[<span class="ruby-identifier">template_path_parent</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">+</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001054'>
                <a name='M001054'>      </a>
                <div class='synopsis'>
                  <span class='name'>route_url</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001054-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001054-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 108</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">route_url</span>&#x000A;                <span class="ruby-constant">Spider</span><span class="ruby-operator">::</span><span class="ruby-constant">ControllerMixins</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPMixin</span>.<span class="ruby-identifier">reverse_proxy_mapping</span>(<span class="ruby-value str">'/'</span><span class="ruby-operator">+</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">app</span>.<span class="ruby-identifier">route_url</span><span class="ruby-operator">+</span><span class="ruby-value str">'/w/'</span><span class="ruby-operator">+</span><span class="ruby-identifier">relative_url</span>)&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001047'>
                <a name='M001047'>      </a>
                <div class='synopsis'>
                  <span class='name'>scene_elements</span>
                  <span class='arguments'>(*list)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001047-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001047-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 75</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scene_elements</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">list</span>)&#x000A;                <span class="ruby-ivar">@scene_elements</span> <span class="ruby-operator">||=</span> []&#x000A;                <span class="ruby-ivar">@scene_elements</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">list</span>&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001045'>
                <a name='M001045'>      </a>
                <div class='synopsis'>
                  <span class='name'>tag</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001045-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001045-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 67</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tag</span>(<span class="ruby-identifier">name</span>)&#x000A;                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">app</span>.<span class="ruby-identifier">register_tag</span>(<span class="ruby-identifier">name</span>, <span class="ruby-keyword kw">self</span>)&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001051'>
                <a name='M001051'>      </a>
                <div class='synopsis'>
                  <span class='name'>template_path</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001051-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001051-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 94</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">template_path</span>&#x000A;                <span class="ruby-identifier">p</span> = <span class="ruby-identifier">template_path_parent</span><span class="ruby-operator">+</span><span class="ruby-value str">'/'</span><span class="ruby-operator">+</span><span class="ruby-constant">Inflector</span>.<span class="ruby-identifier">underscore</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'::'</span>)[<span class="ruby-value">-1</span>])&#x000A;                <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value str">'/templates'</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value str">'/templates'</span>))&#x000A;                <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">p</span>&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-class method' id='method-M001050'>
                <a name='M001050'>      </a>
                <div class='synopsis'>
                  <span class='name'>template_path_parent</span>
                  <span class='arguments'>(val=nil)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001050-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001050-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 88</span>&#x000A;            <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">template_path_parent</span>(<span class="ruby-identifier">val</span>=<span class="ruby-keyword kw">nil</span>)&#x000A;                <span class="ruby-comment cmt"># FIXME: damn! find a better way!</span>&#x000A;                <span class="ruby-ivar">@template_path_parent</span> = <span class="ruby-identifier">val</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">val</span>&#x000A;                <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@template_path_parent</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">app</span>.<span class="ruby-identifier">path</span><span class="ruby-operator">+</span><span class="ruby-value str">'/widgets'</span>&#x000A;            <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='public-instance method' id='method-M001077'>
                <a name='M001077'>      </a>
                <div class='synopsis'>
                  <span class='name'>add_widget</span>
                  <span class='arguments'>(widget)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001077-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001077-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 316</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_widget</span>(<span class="ruby-identifier">widget</span>)&#x000A;            <span class="ruby-identifier">widget</span>.<span class="ruby-identifier">id_path</span> = <span class="ruby-ivar">@id_path</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">widget</span>.<span class="ruby-identifier">id</span>]&#x000A;            <span class="ruby-ivar">@widgets</span>[<span class="ruby-identifier">widget</span>.<span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-identifier">widget</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001058'>
                <a name='M001058'>      </a>
                <div class='synopsis'>
                  <span class='name'>attributes=</span>
                  <span class='arguments'>(hash)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001058-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001058-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 138</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes=</span>(<span class="ruby-identifier">hash</span>)&#x000A;            <span class="ruby-identifier">hash</span> = {} <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">hash</span>&#x000A;            <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>&#x000A;                <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001061'>
                <a name='M001061'>      </a>
                <div class='synopsis'>
                  <span class='name'>before</span>
                  <span class='arguments'>(action='')</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001061-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001061-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 157</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before</span>(<span class="ruby-identifier">action</span>=<span class="ruby-value str">''</span>)&#x000A;            <span class="ruby-identifier">action</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">''</span>&#x000A;            <span class="ruby-ivar">@_action</span> = <span class="ruby-identifier">action</span>&#x000A;            <span class="ruby-ivar">@_action_local</span>, <span class="ruby-ivar">@_action_rest</span> = <span class="ruby-identifier">action</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-value">2</span>)&#x000A;            <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@template</span>&#x000A;                <span class="ruby-ivar">@template</span> = <span class="ruby-identifier">load_template</span>(<span class="ruby-ivar">@use_template</span>)&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-ivar">@id</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">:id</span>]&#x000A;            <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">id_path</span> = <span class="ruby-ivar">@id_path</span>&#x000A;            <span class="ruby-identifier">required_groups</span> = {}&#x000A;            <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">params</span><span class="ruby-operator">|</span>&#x000A;                <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:required</span>])&#x000A;                    <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:required</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">k</span>])&#x000A;                        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Attribute #{k} is required by widget #{self}&quot;</span>&#x000A;                    <span class="ruby-keyword kw">else</span>&#x000A;                        <span class="ruby-keyword kw">if</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">k</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">required_groups</span>[<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:required</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">false</span>)&#x000A;                            <span class="ruby-identifier">required_groups</span>[<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:required</span>]] <span class="ruby-operator">||=</span> []&#x000A;                            <span class="ruby-identifier">required_groups</span>[<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:required</span>]] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">k</span>&#x000A;                        <span class="ruby-keyword kw">else</span>&#x000A;                            <span class="ruby-identifier">required_groups</span>[<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:required</span>]] = <span class="ruby-keyword kw">false</span>&#x000A;                        <span class="ruby-keyword kw">end</span>&#x000A;                    <span class="ruby-keyword kw">end</span> &#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-identifier">required_groups</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group_name</span>, <span class="ruby-identifier">attributes</span><span class="ruby-operator">|</span>&#x000A;                <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attributes</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>&#x000A;                <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Widget #{self} requires attribute #{attributes.join(' or ')} to be set&quot;</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-identifier">prepare</span>&#x000A;            <span class="ruby-ivar">@before_done</span> = <span class="ruby-keyword kw">true</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001062'>
                <a name='M001062'>      </a>
                <div class='synopsis'>
                  <span class='name'>before_done?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001062-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001062-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 189</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_done?</span>&#x000A;            <span class="ruby-ivar">@before_done</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001076'>
                <a name='M001076'>      </a>
                <div class='synopsis'>
                  <span class='name'>create_widget</span>
                  <span class='arguments'>(klass, id, *params)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001076-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001076-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 309</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_widget</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">id</span>,  <span class="ruby-operator">*</span><span class="ruby-identifier">params</span>)&#x000A;            <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">params</span>)&#x000A;            <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">id</span> = <span class="ruby-identifier">id</span>&#x000A;            <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">id_path</span> = <span class="ruby-ivar">@id_path</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">id</span>]&#x000A;            <span class="ruby-ivar">@widgets</span>[<span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-identifier">obj</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001084'>
                <a name='M001084'>      </a>
                <div class='synopsis'>
                  <span class='name'>css_class</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001084-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001084-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 387</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">css_class</span>&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@css_class</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@css_class</span>&#x000A;            <span class="ruby-identifier">supers</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">select</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Spider</span><span class="ruby-operator">::</span><span class="ruby-constant">Widget</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">subclass_of?</span>(<span class="ruby-constant">Spider</span><span class="ruby-operator">::</span><span class="ruby-constant">Widget</span>)}&#x000A;            <span class="ruby-ivar">@css_class</span> = <span class="ruby-constant">Inflector</span>.<span class="ruby-identifier">underscore</span>(<span class="ruby-identifier">supers</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'/'</span>)).<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'_'</span>, <span class="ruby-value str">'-'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-value str">' '</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">' '</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001068'>
                <a name='M001068'>      </a>
                <div class='synopsis'>
                  <span class='name'>did_run?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001068-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001068-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 257</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">did_run?</span>&#x000A;            <span class="ruby-ivar">@did_run</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001074'>
                <a name='M001074'>      </a>
                <div class='synopsis'>
                  <span class='name'>flash</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001074-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001074-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 300</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">flash</span>&#x000A;            <span class="ruby-identifier">s</span> = <span class="ruby-identifier">session</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">session</span>.<span class="ruby-identifier">flash</span>, <span class="ruby-constant">Spider</span><span class="ruby-operator">::</span><span class="ruby-constant">FlashHash</span>)&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">s</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001057'>
                <a name='M001057'>      </a>
                <div class='synopsis'>
                  <span class='name'>full_id</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001057-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001057-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 134</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">full_id</span>&#x000A;            <span class="ruby-ivar">@id_path</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'-'</span>)&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001069'>
                <a name='M001069'>      </a>
                <div class='synopsis'>
                  <span class='name'>init_widget_done?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001069-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001069-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 261</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init_widget_done?</span>&#x000A;            <span class="ruby-ivar">@init_widget_done</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001064'>
                <a name='M001064'>      </a>
                <div class='synopsis'>
                  <span class='name'>init_widgets</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001064-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001064-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 199</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init_widgets</span>&#x000A;            <span class="ruby-keyword kw">if</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">scene_attributes</span>)&#x000A;                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">scene_attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>&#x000A;                    <span class="ruby-ivar">@scene</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-node">&quot;@#{name}&quot;</span>)&#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-identifier">template</span>.<span class="ruby-identifier">request</span> = <span class="ruby-ivar">@request</span>&#x000A;            <span class="ruby-identifier">template</span>.<span class="ruby-identifier">response</span> = <span class="ruby-ivar">@response</span>&#x000A;            <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">init</span>(<span class="ruby-ivar">@scene</span>)&#x000A;            <span class="ruby-ivar">@widgets</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-ivar">@template</span>.<span class="ruby-identifier">widgets</span>)&#x000A;            <span class="ruby-ivar">@widgets</span>.<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">id</span>, <span class="ruby-identifier">w</span><span class="ruby-operator">|</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-keyword kw">self</span> }&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001082'>
                <a name='M001082'>      </a>
                <div class='synopsis'>
                  <span class='name'>owner_controller</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001082-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001082-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 365</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">owner_controller</span>&#x000A;            <span class="ruby-identifier">w</span> = <span class="ruby-keyword kw">self</span>&#x000A;            <span class="ruby-keyword kw">while</span> (<span class="ruby-identifier">w</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Widget</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">template</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">template</span>.<span class="ruby-identifier">owner</span>)&#x000A;                <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">containing_template</span>&#x000A;                <span class="ruby-identifier">w</span> = <span class="ruby-identifier">w</span>.<span class="ruby-identifier">containing_template</span>.<span class="ruby-identifier">owner</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">w</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001072'>
                <a name='M001072'>      </a>
                <div class='synopsis'>
                  <span class='name'>params</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001072-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001072-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 283</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">params</span>&#x000A;            <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">'_w'</span>]&#x000A;            <span class="ruby-keyword kw">return</span> {} <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">p</span>&#x000A;            <span class="ruby-ivar">@id_path</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> &#x000A;                <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span>[<span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span>]&#x000A;                <span class="ruby-keyword kw">return</span> {} <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">p</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">p</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001079'>
                <a name='M001079'>      </a>
                <div class='synopsis'>
                  <span class='name'>parse_content</span>
                  <span class='arguments'>(doc)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001079-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001079-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 326</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_content</span>(<span class="ruby-identifier">doc</span>)&#x000A;            <span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'sp:attribute'</span>)&#x000A;            <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span>&#x000A;                <span class="ruby-identifier">name</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'name'</span>].<span class="ruby-identifier">to_sym</span>&#x000A;                <span class="ruby-identifier">kvs</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">children_of_type</span>(<span class="ruby-value str">'sp:value'</span>)&#x000A;                <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">kvs</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)&#x000A;                    <span class="ruby-identifier">value</span> = {}&#x000A;                    <span class="ruby-identifier">kvs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">kv</span><span class="ruby-operator">|</span>&#x000A;                        <span class="ruby-identifier">key</span> = <span class="ruby-identifier">kv</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'key'</span>]&#x000A;                        <span class="ruby-identifier">val</span> = <span class="ruby-identifier">kv</span>.<span class="ruby-identifier">innerText</span>&#x000A;                        <span class="ruby-identifier">value</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">val</span>&#x000A;                    <span class="ruby-keyword kw">end</span>&#x000A;                <span class="ruby-keyword kw">else</span>&#x000A;                    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'value'</span>]&#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;                <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">w</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'widget'</span>])&#x000A;                    <span class="ruby-ivar">@widget_attributes</span>[<span class="ruby-identifier">w</span>] = {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>}&#x000A;                <span class="ruby-keyword kw">else</span>&#x000A;                    <span class="ruby-ivar">@attributes</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">value</span>&#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">remove</span>&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">doc</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001078'>
                <a name='M001078'>      </a>
                <div class='synopsis'>
                  <span class='name'>parse_content_xml</span>
                  <span class='arguments'>(xml)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001078-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001078-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 322</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_content_xml</span>(<span class="ruby-identifier">xml</span>)&#x000A;            <span class="ruby-identifier">parse_content</span>(<span class="ruby-constant">Hpricot</span>(<span class="ruby-identifier">xml</span>))&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001063'>
                <a name='M001063'>      </a>
                <div class='synopsis'>
                  <span class='name'>prepare</span>
                  <span class='arguments'>(action='')</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001063-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001063-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 193</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prepare</span>(<span class="ruby-identifier">action</span>=<span class="ruby-value str">''</span>)&#x000A;            <span class="ruby-identifier">init_widgets</span>&#x000A;            <span class="ruby-identifier">set_widget_attributes</span>&#x000A;            <span class="ruby-identifier">prepare_widgets</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001083'>
                <a name='M001083'>      </a>
                <div class='synopsis'>
                  <span class='name'>prepare_scene</span>
                  <span class='arguments'>(scene)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001083-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001083-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 374</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prepare_scene</span>(<span class="ruby-identifier">scene</span>)&#x000A;            <span class="ruby-identifier">scene</span> = <span class="ruby-keyword kw">super</span>&#x000A;            <span class="ruby-keyword kw">if</span> (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">scene_attributes</span>) <span class="ruby-comment cmt"># Repeat for new instance variables</span>&#x000A;                <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">scene_attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>&#x000A;                    <span class="ruby-ivar">@scene</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-node">&quot;@#{name}&quot;</span>)&#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-comment cmt"># FIXME: owner_controller should be (almost) always defined</span>&#x000A;            <span class="ruby-identifier">scene</span>.<span class="ruby-identifier">controller</span>[<span class="ruby-identifier">:request_path</span>] = <span class="ruby-identifier">owner_controller</span>.<span class="ruby-identifier">request_path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">owner_controller</span>&#x000A;            <span class="ruby-identifier">scene</span>.<span class="ruby-identifier">widget</span>[<span class="ruby-identifier">:request_path</span>] = <span class="ruby-identifier">widget_request_path</span>&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">scene</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001066'>
                <a name='M001066'>      </a>
                <div class='synopsis'>
                  <span class='name'>prepare_widgets</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001066-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001066-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 233</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prepare_widgets</span>&#x000A;            <span class="ruby-identifier">r</span> = <span class="ruby-identifier">route_widget</span>&#x000A;            <span class="ruby-ivar">@widgets</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">id</span>, <span class="ruby-identifier">w</span><span class="ruby-operator">|</span>&#x000A;                <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">r</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">r</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_sym</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">id</span>)&#x000A;                    <span class="ruby-identifier">act</span> = <span class="ruby-identifier">r</span>[<span class="ruby-value">1</span>]&#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;                <span class="ruby-identifier">act</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">''</span>&#x000A;                <span class="ruby-identifier">w</span>.<span class="ruby-identifier">before</span>(<span class="ruby-identifier">act</span>)&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">resources</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">res</span><span class="ruby-operator">|</span>&#x000A;                <span class="ruby-identifier">res</span> = <span class="ruby-identifier">res</span>.<span class="ruby-identifier">clone</span>&#x000A;                <span class="ruby-identifier">res</span>[<span class="ruby-identifier">:src</span>] = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">pub_url</span><span class="ruby-operator">+</span><span class="ruby-value str">'/'</span><span class="ruby-operator">+</span><span class="ruby-identifier">res</span>[<span class="ruby-identifier">:src</span>]&#x000A;                <span class="ruby-ivar">@resources</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">res</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001070'>
                <a name='M001070'>      </a>
                <div class='synopsis'>
                  <span class='name'>render</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  def execute(action=&#8217;&#8217;)
                  </p>
                  <pre>run(action)&#x000A;render</pre>
                  <p>
                  end
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001070-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001070-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 270</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render</span>&#x000A;            <span class="ruby-identifier">prepare_scene</span>(<span class="ruby-ivar">@scene</span>)&#x000A;            <span class="ruby-ivar">@template</span>.<span class="ruby-identifier">render</span>(<span class="ruby-ivar">@scene</span>)&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001080'>
                <a name='M001080'>      </a>
                <div class='synopsis'>
                  <span class='name'>resources</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001080-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001080-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 351</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resources</span>&#x000A;            <span class="ruby-identifier">res</span> = <span class="ruby-ivar">@resources</span>.<span class="ruby-identifier">clone</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">widget_resources</span>&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001059'>
                <a name='M001059'>      </a>
                <div class='synopsis'>
                  <span class='name'>route_widget</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001059-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001059-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 145</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">route_widget</span>&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001067'>
                <a name='M001067'>      </a>
                <div class='synopsis'>
                  <span class='name'>run</span>
                  <span class='arguments'>(action='')</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001067-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001067-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 250</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">run</span>(<span class="ruby-identifier">action</span>=<span class="ruby-value str">''</span>)&#x000A;            <span class="ruby-ivar">@widgets</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">wname</span>, <span class="ruby-identifier">w</span><span class="ruby-operator">|</span>&#x000A;                <span class="ruby-identifier">w</span>.<span class="ruby-identifier">run</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-ivar">@did_run</span> = <span class="ruby-keyword kw">true</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001073'>
                <a name='M001073'>      </a>
                <div class='synopsis'>
                  <span class='name'>session</span>
                  <span class='arguments'>(container=@request.session, klass=Hash)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001073-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001073-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 293</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">session</span>(<span class="ruby-identifier">container</span>=<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">session</span>, <span class="ruby-identifier">klass</span>=<span class="ruby-constant">Hash</span>)&#x000A;            <span class="ruby-identifier">s</span> = (<span class="ruby-identifier">container</span>[<span class="ruby-value str">'_w'</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>)&#x000A;            <span class="ruby-ivar">@id_path</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>].<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span> = (<span class="ruby-identifier">s</span>[<span class="ruby-identifier">id</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>) }&#x000A;            <span class="ruby-identifier">s</span> = (<span class="ruby-identifier">s</span>[<span class="ruby-ivar">@id_path</span>[<span class="ruby-value">-1</span>]] <span class="ruby-operator">||=</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>)&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">s</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001065'>
                <a name='M001065'>      </a>
                <div class='synopsis'>
                  <span class='name'>set_widget_attributes</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001065-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001065-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 212</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_widget_attributes</span>&#x000A;            <span class="ruby-ivar">@widget_attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">w_id</span>, <span class="ruby-identifier">a</span><span class="ruby-operator">|</span>&#x000A;                <span class="ruby-identifier">w_id_parts</span> = <span class="ruby-identifier">w_id</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>, <span class="ruby-value">2</span>)&#x000A;                <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">w_id_parts</span>[<span class="ruby-value">1</span>])&#x000A;                    <span class="ruby-identifier">w_id</span> = <span class="ruby-identifier">w_id_parts</span>[<span class="ruby-value">0</span>]&#x000A;                    <span class="ruby-identifier">sub_w</span> = <span class="ruby-identifier">w_id_parts</span>[<span class="ruby-value">1</span>]&#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;                <span class="ruby-identifier">w_id</span> = <span class="ruby-identifier">w_id</span>.<span class="ruby-identifier">to_sym</span>&#x000A;                <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@widgets</span>[<span class="ruby-identifier">w_id</span>])&#x000A;                    <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">sub_w</span>)&#x000A;                        <span class="ruby-ivar">@widgets</span>[<span class="ruby-identifier">w_id</span>].<span class="ruby-identifier">widget_attributes</span>[<span class="ruby-identifier">sub_w</span>] = <span class="ruby-identifier">a</span>&#x000A;                    <span class="ruby-keyword kw">else</span>&#x000A;                        <span class="ruby-keyword kw">if</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">a</span>[<span class="ruby-identifier">:name</span>])&#x000A;                            <span class="ruby-keyword kw">next</span>&#x000A;                        <span class="ruby-keyword kw">end</span>&#x000A;                        <span class="ruby-ivar">@widgets</span>[<span class="ruby-identifier">w_id</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-identifier">a</span>[<span class="ruby-identifier">:name</span>].<span class="ruby-identifier">to_sym</span>] = <span class="ruby-identifier">a</span>[<span class="ruby-identifier">:value</span>]&#x000A;                    <span class="ruby-keyword kw">end</span>&#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001075'>
                <a name='M001075'>      </a>
                <div class='synopsis'>
                  <span class='name'>transient_session</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001075-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001075-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 305</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">transient_session</span>&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">session</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">session</span>.<span class="ruby-identifier">transient</span>, <span class="ruby-constant">Spider</span><span class="ruby-operator">::</span><span class="ruby-constant">TransientHash</span>)&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001071'>
                <a name='M001071'>      </a>
                <div class='synopsis'>
                  <span class='name'>try_rescue</span>
                  <span class='arguments'>(exc)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001071-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001071-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 275</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">try_rescue</span>(<span class="ruby-identifier">exc</span>)&#x000A;            <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">exc</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">NotFound</span>))&#x000A;                <span class="ruby-identifier">error</span>(<span class="ruby-node">&quot;Widget path not found: #{exc.path}&quot;</span>)&#x000A;            <span class="ruby-keyword kw">else</span>&#x000A;                <span class="ruby-identifier">raise</span> <span class="ruby-identifier">exc</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001060'>
                <a name='M001060'>      </a>
                <div class='synopsis'>
                  <span class='name'>widget_request_path</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001060-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001060-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 149</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">widget_request_path</span>&#x000A;            <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">path</span>&#x000A;            <span class="ruby-identifier">i</span> = <span class="ruby-identifier">p</span>.<span class="ruby-identifier">index</span>(<span class="ruby-ivar">@_action</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@_action</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@_action</span>.<span class="ruby-identifier">empty?</span>&#x000A;            <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-value">2</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">i</span>&#x000A;            <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\/+$/</span>, <span class="ruby-value str">''</span>)&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">p</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M001081'>
                <a name='M001081'>      </a>
                <div class='synopsis'>
                  <span class='name'>widget_resources</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M001081-source'); return false">
                    [show source]
                  </a>
                  <pre id='M001081-source'><span class="ruby-comment cmt"># File lib/spiderfw/widget/widget.rb, line 356</span>&#x000A;        <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">widget_resources</span>&#x000A;            <span class="ruby-identifier">res</span> = []&#x000A;            <span class="ruby-ivar">@widgets</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">id</span>, <span class="ruby-identifier">w</span><span class="ruby-operator">|</span>&#x000A;                <span class="ruby-identifier">res</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">resources</span>&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">res</span>&#x000A;        <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
